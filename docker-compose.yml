version: '3'

services:

    api:
        build: .
        command: bash -c "python manage.py makemigrations && python manage.py migrate && python manage.py runserver 0.0.0.0:8000"
        container_name: attendace_api
        volumes:
        - .:/attendace_api
        ports:
        - "8000:8000"

    nginx:
        build: ./nginx
        container_name: ng_server
        depends_on:
            - api
        command: nginx -g 'daemon off;'
        ports:
            - "80:80"
        volumes:
            - ./static:/var/www/static
